<section class="events-page">

  <div class="events-header">
    <div>
      <h1>Events near you</h1>
      <p>Discover what's happening in your community</p>
    </div>

    <div class="header-actions">
      <button class="create-event-btn" (click)="openCreateEvent()">
        Create an event
      </button>
      <span class="your-events"
            (click)="showOnlyUserEvents = !showOnlyUserEvents">
        {{ showOnlyUserEvents ? 'All events' : 'Your events' }}
      </span>
      <p *ngIf="showOnlyUserEvents && displayedEvents.length === 0">
        You haven't created any events yet.
      </p>

    </div>
  </div>

  <!-- ✅ CREATE EVENT MODAL (ADD HERE) -->
  <div class="event-modal-overlay" *ngIf="showCreateEventForm">
    <div class="event-modal">

      <h2>Create New Event</h2>

      <form (ngSubmit)="createEvent()">

        <input
          type="text"
          placeholder="Event name"
          [(ngModel)]="newEvent.name"
          name="name"
          required
        />

        <input
          type="text"
          placeholder="Date (e.g., 25)"
          [(ngModel)]="newEvent.date"
          name="date"
          required
        />

        <input
          type="text"
          placeholder="Month (e.g., MAR)"
          [(ngModel)]="newEvent.month"
          name="month"
          required
        />

        <input
          type="text"
          placeholder="Time (e.g., 5:00 PM)"
          [(ngModel)]="newEvent.time"
          name="time"
          required
        />

        <input
          type="text"
          placeholder="Location"
          [(ngModel)]="newEvent.location"
          name="location"
          required
        />

        <input
          type="file"
          accept="image/*"
          (change)="onImageUpload($event)"
        />

        <div *ngIf="imagePreview" class="image-preview">
          <img [src]="imagePreview" alt="Preview" />
        </div>


        <div class="modal-actions">
          <button type="button" (click)="closeCreateEvent()">Cancel</button>
          <button type="submit">Create</button>
        </div>

      </form>

    </div>
  </div>

  <!-- EVENTS GRID -->
  <div class="events-grid">
  <div class="event-card" *ngFor="let event of displayedEvents">

      <div class="image-wrapper">
        <img [src]="event.imageUrl" [alt]="event.name">

        <div class="date-badge">
          <span class="day">{{ event.date }}</span>
          <span class="month">{{ event.month }}</span>
        </div>

        <div class="share-icon">⤴</div>
      </div>

      <div class="event-content">
        <h3>{{ event.name }}</h3>
        <p class="time">{{ event.time }}</p>
        <p class="location">{{ event.location }}</p>
        <p class="interested">{{ event.interested }} neighbors interested</p>

        <button class="interest-btn">+ Interested?</button>
      </div>

    </div>

    <!-- Host Event Placeholder Card -->
    <div class="event-card host-card" (click)="openCreateEvent()">
      <div class="host-content">
        <div class="plus-icon">+</div>
        <h3>Host an event</h3>
        <p>Bring your neighbors together for something fun!</p>
      </div>
    </div>

  </div>

</section>
